<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Map | Docs</title>
    <meta name="generator" content="VuePress 1.5.0">
    
    <meta name="description" content="Documentation for 4PROJ">
    <link rel="preload" href="/assets/css/0.styles.9bcdb81a.css" as="style"><link rel="preload" href="/assets/js/app.d3271bfa.js" as="script"><link rel="preload" href="/assets/js/2.63f0954b.js" as="script"><link rel="preload" href="/assets/js/23.20c34d3a.js" as="script"><link rel="prefetch" href="/assets/js/10.9bd486cf.js"><link rel="prefetch" href="/assets/js/11.b605f4e4.js"><link rel="prefetch" href="/assets/js/12.47b39896.js"><link rel="prefetch" href="/assets/js/13.97af23bc.js"><link rel="prefetch" href="/assets/js/14.1f990221.js"><link rel="prefetch" href="/assets/js/15.83224602.js"><link rel="prefetch" href="/assets/js/16.daa138f5.js"><link rel="prefetch" href="/assets/js/17.0b41b8b5.js"><link rel="prefetch" href="/assets/js/18.41ceb337.js"><link rel="prefetch" href="/assets/js/19.1a48c7c1.js"><link rel="prefetch" href="/assets/js/20.92ee4239.js"><link rel="prefetch" href="/assets/js/21.828f5eda.js"><link rel="prefetch" href="/assets/js/22.5fb08847.js"><link rel="prefetch" href="/assets/js/3.e5f413f6.js"><link rel="prefetch" href="/assets/js/4.853d7076.js"><link rel="prefetch" href="/assets/js/5.6965fc63.js"><link rel="prefetch" href="/assets/js/6.db4945ec.js"><link rel="prefetch" href="/assets/js/7.9df462cc.js"><link rel="prefetch" href="/assets/js/8.b7da312c.js"><link rel="prefetch" href="/assets/js/9.f9bf8962.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9bcdb81a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://shop.4proj.tools" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shop
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/4PROJ-Bruxelles/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repository
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="https://shop.4proj.tools" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Shop
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/4PROJ-Bruxelles/documentation" target="_blank" rel="noopener noreferrer" class="repo-link">
    Repository
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Welcome to the docs</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Shop</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/shop/" class="sidebar-link">Introduction</a></li><li><a href="/shop/authentication.html" class="sidebar-link">Authentication</a></li><li><a href="/shop/admin.html" class="sidebar-link">Admin</a></li><li><a href="/shop/customer.html" class="sidebar-link">Customer</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Shop API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/shop-api/" class="sidebar-link">Introduction</a></li><li><a href="/shop-api/account.html" class="sidebar-link">Account</a></li><li><a href="/shop-api/users.html" class="sidebar-link">Users</a></li><li><a href="/shop-api/articles.html" class="sidebar-link">Articles</a></li><li><a href="/shop-api/categories.html" class="sidebar-link">Categories</a></li><li><a href="/shop-api/transactions.html" class="sidebar-link">Transactions</a></li><li><a href="/shop-api/cart.html" class="sidebar-link">Cart</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Recommandation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/recommendation/" class="sidebar-link">Introduction</a></li><li><a href="/recommendation/recommender.html" class="sidebar-link">Recommander</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Trilateration</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/trilateration/" aria-current="page" class="sidebar-link">Introduction</a></li><li><a href="/trilateration/map.html" aria-current="page" class="active sidebar-link">Map</a></li><li><a href="/trilateration/beacons.html" class="sidebar-link">Beacons</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mobile App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/app/" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Backups</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/backups/" class="sidebar-link">Backups</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="map"><a href="#map" class="header-anchor">#</a> Map</h1> <p>The map is made up of three technical parts allowing to visualize the movement of a person according to the power of the three signals received by the bluetooth beacons.</p> <p>These three parts are:</p> <ul><li>The API that receives the information sent by the beacons and transfers it to the front-end.</li> <li>The map, created using the <em>p5.js</em> framework, displays the beacons and connected devices as blue dots on a web page.</li> <li><em>SocketIO</em>, which allows real-time communication with the server.</li></ul> <h1 id="api-with-nodejs"><a href="#api-with-nodejs" class="header-anchor">#</a> API with NodeJS</h1> <p>The API is created in JavaScript using NodeJS, as well as Express and SQLite.
It is mainly used to retrieve the information sent by the bluetooth terminals, store and process it to send it to the frontend.</p> <p>Three requests can be sent to it:</p> <ul><li>A POST request to add or replace the RSSI value of a Beacon for a MAC address.</li> <li>A DELETE request to delete a device if it comes too far from one of the terminals.</li> <li>A GET request to retrieve the information of all devices stored in the database.</li></ul> <h1 id="frontend-with-p5-js"><a href="#frontend-with-p5-js" class="header-anchor">#</a> Frontend with p5.js</h1> <p>The visual of this project is a canvas containing, basically, three dots representing the three terminals that are supposed to be installed in real.
These points can be moved by clicking on them to reposition them to imitate the real configuration of the beacons.</p> <p>As soon as the minimum information for a device to be displayed is sent by the PLC, a new blue point representing a device will be placed on the map.
By moving the bollards, the point will adapt to the new position directly.</p> <p>A background image can be dragged and dropped to have a scale comparable to the reality.</p> <p>By right-clicking on the web page, an options tab can be opened to change some display constants:</p> <ul><li>B1 to B2 is the number of meters separating terminal 1 to terminal 2, this metric is necessary to calculate the number of pixels per meter for the display to be as realistic as possible.</li> <li>txPower is the signal power at one meter from a terminal, it is important in the trilateration calculation.</li> <li>The Environmental Factor is a variable depending on the environment in which the bollards are placed. This value can vary between 2 and 5.</li></ul> <h1 id="socketio"><a href="#socketio" class="header-anchor">#</a> SocketIO</h1> <p>SocketIO communicates between the frontend and the API in real time to send changes in information from a device to the map directly.</p> <p>Each time a new value, or deletion of a value, is made in the API, the API will send information from all devices to update the map.</p> <p>Translated with www.DeepL.com/Translator (free version)</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/14/2020, 1:27:24 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/trilateration/" class="prev router-link-active">
        Introduction
      </a></span> <span class="next"><a href="/trilateration/beacons.html">
        Beacons
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d3271bfa.js" defer></script><script src="/assets/js/2.63f0954b.js" defer></script><script src="/assets/js/23.20c34d3a.js" defer></script>
  </body>
</html>
